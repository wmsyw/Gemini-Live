version: "3.8"

services:
  app:
    image: ghcr.io/wmsyw/gemini-live-voice-pwa:latest
    container_name: gemini-live
    # 仅公开前端端口（默认 5173）；代理 27777 不暴露
    ports:
      - "5173:5173"
    # 自动重启，提升可用性
    restart: unless-stopped
    environment:
      # 可选：直接在环境中设置 API Key；也可留空，稍后在“设置”页下发
      - GEMINI_API_KEY=
      # 不需要手动填写 PROXY_SECRET：后端会在首次启动时自动生成并持久化
      # - PROXY_SECRET=
      - PORT_PUBLIC=5173
      - PORT_INTERNAL=27777
    volumes:
      - ./secrets:/app/server/.secrets
